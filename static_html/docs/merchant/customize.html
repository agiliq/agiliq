

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Customizing Merchant &mdash; Merchant Documentation 0.09a documentation</title>
    
    <link rel="stylesheet" href="http://agiliq.com/docs/merchant/_static/default.css" type="text/css" />
    <link rel="stylesheet" href="http://agiliq.com/docs/merchant/_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.09a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="http://agiliq.com/docs/merchant/_static/jquery.js"></script>
    <script type="text/javascript" src="http://agiliq.com/docs/merchant/_static/underscore.js"></script>
    <script type="text/javascript" src="http://agiliq.com/docs/merchant/_static/doctools.js"></script>
    <link rel="top" title="Merchant Documentation 0.09a documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Merchant Documentation 0.09a documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="customizing-merchant">
<h1>Customizing Merchant<a class="headerlink" href="customize.html#customizing-merchant" title="Permalink to this headline">Â¶</a></h1>
<p>While we make all attempts to cover most of the functionality of the payment
processors but may fall short sometimes. There is absolutely no need to worry
as the gateway and integration objects are extensible.</p>
<p><a class="reference external" href="https://github.com/agiliq/merchant">Merchant</a> looks for gateways and integration objects under every <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt>
in <tt class="docutils literal"><span class="pre">settings.py</span></tt>. So it is possible for you to write your custom or modified
objects within your app without having to patch the merchant code.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Most of what is written below will also be applicable for gateways and you will
have to replace instances of <tt class="docutils literal"><span class="pre">integration</span></tt> with <tt class="docutils literal"><span class="pre">gateway</span></tt>.</p>
</div>
<p>Suppose you want to extend the <a class="reference internal" href="offsite/braintree_payments.html"><em>Braintree Payments Integration</em></a>,
to render a different template on success instead of the default <tt class="docutils literal"><span class="pre">billing/braintree_success.html</span></tt>.</p>
<p>Here is the process:</p>
<ul>
<li><p class="first">In any of the <tt class="docutils literal"><span class="pre">settings.INSTALLED_APPS</span></tt>, create an <tt class="docutils literal"><span class="pre">integrations</span></tt> module
(in layman&#8217;s term an <tt class="docutils literal"><span class="pre">integrations</span></tt> directory with an <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file under that
directory).</p>
</li>
<li><p class="first">Create a file in that <tt class="docutils literal"><span class="pre">integrations</span></tt> directory that follows the convention below:</p>
<div class="highlight-python"><pre>&lt;integration_name&gt;_integration.py</pre>
</div>
<p>Let us name the modified integration as <tt class="docutils literal"><span class="pre">modified_bp</span></tt>, then the filename would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">modified_bp_integration</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>and the Integration class name in that file as <tt class="docutils literal"><span class="pre">ModifiedBpIntegration</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The naming of the file and class follows a simple rule. The filename is split on
underscores and each element of the split sequence is capitalized to obtain the
class name.</p>
</div>
<p>So in our example, in the <tt class="docutils literal"><span class="pre">modified_bp_integration.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ModifiedBpIntegration</span><span class="p">(</span><span class="n">BraintreePaymentsIntegration</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">braintree_success_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
       <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&quot;my_new_success.html&quot;</span><span class="p">,</span>
                                 <span class="p">{</span><span class="s">&quot;resp&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">},</span>
                                 <span class="n">context_instance</span><span class="o">=</span><span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first">Then use the new integration in your code just as you would for a built-in integration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">bp_obj</span> <span class="o">=</span> <span class="n">get_integration</span><span class="p">(</span><span class="s">&quot;modified_bp&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/customize.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Merchant Documentation 0.09a documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Team Agiliq.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>